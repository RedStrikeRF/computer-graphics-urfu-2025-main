![Готовый вариант](./ready.png)


-— Задание 02 —-

1) Рисование простых фигур в opengl

Открыть в C# новый проект (консольный или лучше WinForms).
Скачать файлы opentk.zip, opengl_start.zip, opengl_st.txt
Подключить библиотеки *.dll к проекту. Пригодится также добавить ссылку на System.Drawing 4.0 (в Общая сборка).
Выполнить примеры в C# (в opengl_start.zip).
p.s. В 19-й версии C# пример в консольном проекте не транслируется. Надо открыть проект типа WinForms, и переписать пример в класс Program.

Библиотеки версии opentk_2.0 (opentk 3.3). Для задания их хватает. Если надо более новые (есть 4.0), найдете самостоятельно.

Перенести в Programs.cs пример1 из файла Примеры_рисования.

В примере1 сначала происходит настройка вида отображения, затем рисование треугольника.
//Очистка экрана
GL.Clear(ClearBufferMask.ColorBufferBit | ClearBufferMask.DepthBufferBit);
//Настройка вида экрана
Matrix4 modelview = Matrix4.LookAt(Vector3.Zero, Vector3.UnitZ, Vector3.UnitY);
GL.MatrixMode(MatrixMode.Modelview);
GL.LoadMatrix(ref modelview);

//собственно рисование
GL.Begin(BeginMode.Triangles);
GL.Color3(1.0f, 1.0f, 0.0f); GL.Vertex3();
GL.Color3(1.0f, 0.0f, 0.0f); GL.Vertex3(1.0f, -1.0f, 4.0f);
GL.Color3(0.2f, 0.9f, 1.0f); GL.Vertex3(0.0f, 1.0f, 4.0f);
GL.End()

Сначала стоит унести все цифры в переменные.

Определим число точек
int n=3;
Определим массив цветов
Vector3 [] clr=new Vector3[n];
clr[0]=new Vector3(1.0f,1.0f,0.0f);
clr[1]= аналогично
clr[2]=

Определим массив точек
Vector3 [] p=new Vector3[n];
float z=4.0f;
p[0]=new Vector3(-1.0f, -1.0f, z);
p[1]= аналогично
p[2]=

Перенесем рисование в отдельную функцию
void draw_tre(Vector3 [] p, Vector3 [] clr, int n, BeginMode bm) {
GL.Begin(bm);
for(int i=0;i<n;i++) {
GL.Color3(clr[i];
GL.Vertex3(p[i]);
}
GL.End()
}

Вызовем эту функцию
draw_tre(p,clr,n,BeginMode.LineLoop) //или BeginMode.Polygon

Добавить 4-ю точку и превратить трекугольник в квадрат.

Написать функцию, рисующую правильный многоугольник, задав ей
- центр
- радиус
- цвет (один или массив)
- количество граней
- режим рисования

Круг (рисуется как многоугольник с большим числом сторон, например n=50)


2) Преобразования изображений на плоскости (на базовом ЯП или в opengl)

В двумерной плоскости для многоугольника сделать:
- изменение масштаба (масштаб задается отдельной переменной, например с именем scale);
- вращение вокруг заданной точки (не обязательно проходящей через центр фигуры, частный случай: вращение относительно центра фигуры также может быть реализован);
- анимированное движение по кривой, заданной функцией F(x).

При движении можно проверять границы области рисования и при достижении объектом одной из границ разворачивать движение объекта в противоположную сторону.
Например у компонента PictureBox (или Panel) имеются в свойствах значения его ширины и высоты (panel1.Width и panel1.Height).
При изменении масштаба и вращении можно использовать матрицы аффинных преобразований.

В базовом ЯП для анимации можно применить цикл вида:
while(условие)
{
стереть изображение
сдвинуть кординаты
Thread.Sleep(200) //задержать на 200 мс
отрисовать снова
}

Приведем пример анимации.

Объявляем глобально центр правильного многоугольника.
Vector3 centre=new Vector3(0f,0f,4f);
int znak=1;

В функции reframe объявляем смещение по x
float dx=0.1f;
Смещаем положение центра
centre.X += dx*znak;
Если встречаем границы области рисования, идем в другую сторону
if ((centre.X<-1)||(centre.X<-1)) znak= -znak;

draw_polygon(centre,radius,clr,n,BeginMode.Polygon);

Чтобы шло движение по заданной функции, объявляем эту функцию, например x-квадрат
float fun(float x) { return x*x; }
Тогда centre.Y=fun(centre.X);

В opengl цикл в функции отрисовки, а для перемещений, вращения, изменения масштаба есть также функции типа GL.Translate, GL.Rotate, GL.Scale.

Translate переводит фокус в заданную точку.
Scale позволяет менять масштаб (либо можно менять радиус как в примере выше).
Rotate первым параметром имеет угол вращения, вторым определяется центр вращения
(принцип аналогичен, задаете начальный угол, приращение угла в цикле и вызываете GL.Rotate).
